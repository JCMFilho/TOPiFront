// Check if given value is integer. Cast strings as potential integers as well.
// See: http://stackoverflow.com/questions/14636536/how-to-check-if-a-variable-is-an-integer-in-javascript
export function isInt(value) {
    if (isNaN(value)) {
        return false;
    }
    const x = parseFloat(value);
    // tslint:disable-next-line:no-bitwise
    return (x | 0) === x;
}
// Similar to `lodash.isobject`
export function isObject(value) {
    const type = typeof value;
    return !!value && (type === 'object' || type === 'function');
}
// Generate a unique id (unique within the entire client session).
// Useful for temporary DOM ids.
let idCounter = 0;
export function uniqueId(prefix = 'uid') {
    return `ngl_${prefix}_${++idCounter}`;
}
export function replaceClass(instance, oldClass, newClass) {
    if (oldClass && oldClass !== newClass) {
        setClass(instance, oldClass, false);
    }
    if (newClass) {
        setClass(instance, newClass, true);
    }
}
function setClass(instance, klasses, isAdd) {
    if (klasses) {
        (Array.isArray(klasses) ? klasses : [klasses]).forEach(k => {
            instance.renderer[isAdd ? 'addClass' : 'removeClass'](instance.element.nativeElement, k);
        });
    }
}
export function ngClassCombine(ngClasses, customClasses) {
    if (!ngClasses) {
        return customClasses;
    }
    // Convert string and Set to array
    if (typeof ngClasses === 'string') {
        ngClasses = ngClasses.split(/\s+/);
    }
    else if (ngClasses instanceof Set) {
        const a = [];
        ngClasses.forEach(v => a.push(v));
        ngClasses = a;
    }
    // Convert array to object
    if (Array.isArray(ngClasses)) {
        ngClasses = ngClasses.reduce((o, klass) => {
            o[klass] = true;
            return o;
        }, {});
    }
    return Object.assign(Object.assign({}, ngClasses), customClasses);
}
/**
   * Check whether value is currently selected.
   *
   * @param selection The value(s) currently selected
   * @param value The value in test, whether is (part of) selection or not
   * @param multiple Whether selections can be have multiple values
   */
export function isOptionSelected(value, selection, multiple) {
    // Multiple
    if (multiple) {
        if (!selection) {
            return false;
        }
        return Array.isArray(selection) ? selection.indexOf(value) > -1 : !!selection[value];
    }
    // Single
    return value === selection;
}
export function addOptionToSelection(value, selection, multiple, clearable = false) {
    let next;
    if (multiple) {
        if (!selection) {
            selection = [];
        }
        if (Array.isArray(selection)) {
            // Remove if already there or add to selection
            const index = selection.indexOf(value);
            next = index > -1
                ? [...selection.slice(0, index), ...selection.slice(index + 1)]
                : [...selection, value];
        }
        else {
            next = Object.assign({}, selection, { [value]: !selection[value] });
        }
    }
    else {
        next = selection === value && clearable ? null : value;
    }
    return next;
}
export function menuItemScroll(container, domItem, scrollPadding = 4) {
    if (domItem.offsetHeight - container.scrollTop + domItem.offsetTop >=
        container.offsetHeight) {
        container.scrollTop =
            domItem.offsetHeight +
                domItem.offsetTop -
                container.offsetHeight +
                scrollPadding;
    }
    else if (domItem.offsetTop <= container.scrollTop) {
        container.scrollTop = domItem.offsetTop - scrollPadding;
    }
}
export function trapEvent(event) {
    if (!event) {
        return;
    }
    event.preventDefault();
    event.stopPropagation();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25nLWxpZ2h0bmluZy8iLCJzb3VyY2VzIjpbImxpYi91dGlsL3V0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsK0VBQStFO0FBQy9FLDBHQUEwRztBQUMxRyxNQUFNLFVBQVUsS0FBSyxDQUFDLEtBQVU7SUFDOUIsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDaEIsT0FBTyxLQUFLLENBQUM7S0FDZDtJQUNELE1BQU0sQ0FBQyxHQUFHLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QixzQ0FBc0M7SUFDdEMsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdkIsQ0FBQztBQUVELCtCQUErQjtBQUMvQixNQUFNLFVBQVUsUUFBUSxDQUFDLEtBQVU7SUFDakMsTUFBTSxJQUFJLEdBQUcsT0FBTyxLQUFLLENBQUM7SUFDMUIsT0FBTyxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxLQUFLLFFBQVEsSUFBSSxJQUFJLEtBQUssVUFBVSxDQUFDLENBQUM7QUFDL0QsQ0FBQztBQUVELGtFQUFrRTtBQUNsRSxnQ0FBZ0M7QUFDaEMsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO0FBQ2xCLE1BQU0sVUFBVSxRQUFRLENBQUMsTUFBTSxHQUFHLEtBQUs7SUFDckMsT0FBTyxPQUFPLE1BQU0sSUFBSSxFQUFFLFNBQVMsRUFBRSxDQUFDO0FBQ3hDLENBQUM7QUFNRCxNQUFNLFVBQVUsWUFBWSxDQUFDLFFBQXVCLEVBQUUsUUFBMkIsRUFBRSxRQUE0QjtJQUM3RyxJQUFJLFFBQVEsSUFBSSxRQUFRLEtBQUssUUFBUSxFQUFFO1FBQ3JDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO0tBQ3JDO0lBQ0QsSUFBSSxRQUFRLEVBQUU7UUFDWixRQUFRLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FB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LCBSZW5kZXJlcjIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuLy8gQ2hlY2sgaWYgZ2l2ZW4gdmFsdWUgaXMgaW50ZWdlci4gQ2FzdCBzdHJpbmdzIGFzIHBvdGVudGlhbCBpbnRlZ2VycyBhcyB3ZWxsLlxuLy8gU2VlOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0NjM2NTM2L2hvdy10by1jaGVjay1pZi1hLXZhcmlhYmxlLWlzLWFuLWludGVnZXItaW4tamF2YXNjcmlwdFxuZXhwb3J0IGZ1bmN0aW9uIGlzSW50KHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB4ID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1iaXR3aXNlXG4gIHJldHVybiAoeCB8IDApID09PSB4O1xufVxuXG4vLyBTaW1pbGFyIHRvIGBsb2Rhc2guaXNvYmplY3RgXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QodmFsdWU6IGFueSk6IGJvb2xlYW4ge1xuICBjb25zdCB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8vIEdlbmVyYXRlIGEgdW5pcXVlIGlkICh1bmlxdWUgd2l0aGluIHRoZSBlbnRpcmUgY2xpZW50IHNlc3Npb24pLlxuLy8gVXNlZnVsIGZvciB0ZW1wb3JhcnkgRE9NIGlkcy5cbmxldCBpZENvdW50ZXIgPSAwO1xuZXhwb3J0IGZ1bmN0aW9uIHVuaXF1ZUlkKHByZWZpeCA9ICd1aWQnKSB7XG4gIHJldHVybiBgbmdsXyR7cHJlZml4fV8keysraWRDb3VudGVyfWA7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlcGxhY2VDbGFzcyB7XG4gIHJlbmRlcmVyOiBSZW5kZXJlcjI7XG4gIGVsZW1lbnQ6IEVsZW1lbnRSZWY7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZUNsYXNzKGluc3RhbmNlOiBJUmVwbGFjZUNsYXNzLCBvbGRDbGFzczogc3RyaW5nIHwgc3RyaW5nW10sIG5ld0NsYXNzPzogc3RyaW5nIHwgc3RyaW5nW10pIHtcbiAgaWYgKG9sZENsYXNzICYmIG9sZENsYXNzICE9PSBuZXdDbGFzcykge1xuICAgIHNldENsYXNzKGluc3RhbmNlLCBvbGRDbGFzcywgZmFsc2UpO1xuICB9XG4gIGlmIChuZXdDbGFzcykge1xuICAgIHNldENsYXNzKGluc3RhbmNlLCBuZXdDbGFzcywgdHJ1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0Q2xhc3MoaW5zdGFuY2U6IElSZXBsYWNlQ2xhc3MsIGtsYXNzZXM6IHN0cmluZyB8IHN0cmluZ1tdLCBpc0FkZDogYm9vbGVhbikge1xuICBpZiAoa2xhc3Nlcykge1xuICAgIChBcnJheS5pc0FycmF5KGtsYXNzZXMpID8ga2xhc3NlcyA6IFtrbGFzc2VzXSkuZm9yRWFjaChrID0+IHtcbiAgICAgIGluc3RhbmNlLnJlbmRlcmVyW2lzQWRkID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcyddKGluc3RhbmNlLmVsZW1lbnQubmF0aXZlRWxlbWVudCwgayk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5nQ2xhc3NDb21iaW5lKG5nQ2xhc3Nlczogc3RyaW5nIHwgc3RyaW5nW10gfCBTZXQ8c3RyaW5nPiB8IHsgW2tsYXNzOiBzdHJpbmddOiBhbnkgfSwgY3VzdG9tQ2xhc3NlczogeyBba2xhc3M6IHN0cmluZ106IGFueSB9KSB7XG4gIGlmICghbmdDbGFzc2VzKSB7XG4gICAgcmV0dXJuIGN1c3RvbUNsYXNzZXM7XG4gIH1cblxuICAvLyBDb252ZXJ0IHN0cmluZyBhbmQgU2V0IHRvIGFycmF5XG4gIGlmICh0eXBlb2YgbmdDbGFzc2VzID09PSAnc3RyaW5nJykge1xuICAgIG5nQ2xhc3NlcyA9IG5nQ2xhc3Nlcy5zcGxpdCgvXFxzKy8pO1xuICB9IGVsc2UgaWYgKG5nQ2xhc3NlcyBpbnN0YW5jZW9mIFNldCkge1xuICAgIGNvbnN0IGEgPSBbXTtcbiAgICBuZ0NsYXNzZXMuZm9yRWFjaCh2ID0+IGEucHVzaCh2KSk7XG4gICAgbmdDbGFzc2VzID0gYTtcbiAgfVxuXG4gIC8vIENvbnZlcnQgYXJyYXkgdG8gb2JqZWN0XG4gIGlmIChBcnJheS5pc0FycmF5KG5nQ2xhc3NlcykpIHtcbiAgICBuZ0NsYXNzZXMgPSBuZ0NsYXNzZXMucmVkdWNlKChvOiBPYmplY3QsIGtsYXNzOiBzdHJpbmcpID0+IHtcbiAgICAgIG9ba2xhc3NdID0gdHJ1ZTtcbiAgICAgIHJldHVybiBvO1xuICAgIH0sIHt9KTtcbiAgfVxuXG4gIHJldHVybiB7Li4ubmdDbGFzc2VzLCAuLi5jdXN0b21DbGFzc2VzfTtcbn1cblxuXG4vKipcbiAgICogQ2hlY2sgd2hldGhlciB2YWx1ZSBpcyBjdXJyZW50bHkgc2VsZWN0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSBzZWxlY3Rpb24gVGhlIHZhbHVlKHMpIGN1cnJlbnRseSBzZWxlY3RlZFxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIGluIHRlc3QsIHdoZXRoZXIgaXMgKHBhcnQgb2YpIHNlbGVjdGlvbiBvciBub3RcbiAgICogQHBhcmFtIG11bHRpcGxlIFdoZXRoZXIgc2VsZWN0aW9ucyBjYW4gYmUgaGF2ZSBtdWx0aXBsZSB2YWx1ZXNcbiAgICovXG5leHBvcnQgZnVuY3Rpb24gaXNPcHRpb25TZWxlY3RlZCh2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgYW55LCBzZWxlY3Rpb246IGFueSB8IGFueVtdLCBtdWx0aXBsZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAvLyBNdWx0aXBsZVxuICBpZiAobXVsdGlwbGUpIHtcbiAgICBpZiAoIXNlbGVjdGlvbikgeyByZXR1cm4gZmFsc2U7IH1cbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShzZWxlY3Rpb24pID8gc2VsZWN0aW9uLmluZGV4T2YodmFsdWUpID4gLTEgOiAhIXNlbGVjdGlvblt2YWx1ZV07XG4gIH1cblxuICAvLyBTaW5nbGVcbiAgcmV0dXJuIHZhbHVlID09PSBzZWxlY3Rpb247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRPcHRpb25Ub1NlbGVjdGlvbih2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgYW55LCBzZWxlY3Rpb246IGFueSB8IGFueVtdLCBtdWx0aXBsZTogYm9vbGVhbiwgY2xlYXJhYmxlID0gZmFsc2UpIHtcbiAgbGV0IG5leHQ6IGFueTtcbiAgaWYgKG11bHRpcGxlKSB7XG4gICAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICAgIHNlbGVjdGlvbiA9IFtdO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3Rpb24pKSB7XG4gICAgICAvLyBSZW1vdmUgaWYgYWxyZWFkeSB0aGVyZSBvciBhZGQgdG8gc2VsZWN0aW9uXG4gICAgICBjb25zdCBpbmRleCA9IHNlbGVjdGlvbi5pbmRleE9mKHZhbHVlKTtcbiAgICAgIG5leHQgPSBpbmRleCA+IC0xXG4gICAgICAgID8gWy4uLnNlbGVjdGlvbi5zbGljZSgwLCBpbmRleCksIC4uLnNlbGVjdGlvbi5zbGljZShpbmRleCArIDEpXVxuICAgICAgICA6IFsuLi5zZWxlY3Rpb24sIHZhbHVlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dCA9IE9iamVjdC5hc3NpZ24oe30sIHNlbGVjdGlvbiwgeyBbdmFsdWVdOiAhc2VsZWN0aW9uW3ZhbHVlXSB9KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbmV4dCA9IHNlbGVjdGlvbiA9PT0gdmFsdWUgJiYgY2xlYXJhYmxlID8gbnVsbCA6IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG5leHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZW51SXRlbVNjcm9sbCAoY29udGFpbmVyLCBkb21JdGVtLCBzY3JvbGxQYWRkaW5nID0gNCkge1xuICBpZiAoXG4gICAgZG9tSXRlbS5vZmZzZXRIZWlnaHQgLSBjb250YWluZXIuc2Nyb2xsVG9wICsgZG9tSXRlbS5vZmZzZXRUb3AgPj1cbiAgICBjb250YWluZXIub2Zmc2V0SGVpZ2h0XG4gICkge1xuICAgIGNvbnRhaW5lci5zY3JvbGxUb3AgPVxuICAgICAgZG9tSXRlbS5vZmZzZXRIZWlnaHQgK1xuICAgICAgZG9tSXRlbS5vZmZzZXRUb3AgLVxuICAgICAgY29udGFpbmVyLm9mZnNldEhlaWdodCArXG4gICAgICBzY3JvbGxQYWRkaW5nO1xuICB9IGVsc2UgaWYgKGRvbUl0ZW0ub2Zmc2V0VG9wIDw9IGNvbnRhaW5lci5zY3JvbGxUb3ApIHtcbiAgICBjb250YWluZXIuc2Nyb2xsVG9wID0gZG9tSXRlbS5vZmZzZXRUb3AgLSBzY3JvbGxQYWRkaW5nO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFwRXZlbnQoZXZlbnQ6IEV2ZW50KSB7XG4gIGlmICghZXZlbnQpIHsgcmV0dXJuOyB9XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xufVxuIl19